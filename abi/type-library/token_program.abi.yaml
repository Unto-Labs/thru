abi:
  package: thru.program.token
  name: "Token Program"
  abi-version: 1
  package-version: 0.1.0
  description: Ideal ABI for the Thru token program instruction envelopes and account
    state
  imports:
    - type: path
      path: "thru_primitives.abi.yaml"
    - type: path
      path: "state_proof.abi.yaml"
  options:
    program-metadata:
      root-types:
        instruction-root: "TokenInstruction"
        account-root: "TokenProgramAccount"
        errors: "TokenError"
        events: "TokenEvent"
types:
- name: Seed32
  kind:
    array:
      packed: true
      size:
        literal:
          u64: 32
      element-type:
        primitive: u8
- name: TickerField
  kind:
    struct:
      packed: true
      fields:
      - name: length
        field-type:
          primitive: u8
      - name: bytes
        field-type:
          array:
            size:
              literal:
                u64: 8
            element-type:
              primitive: u8
- name: InitializeMintInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: mint_account_index
        field-type:
          primitive: u16
      - name: decimals
        field-type:
          primitive: u8
      - name: creator
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: mint_authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: freeze_authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: has_freeze_authority
        field-type:
          primitive: u8
      - name: ticker
        field-type:
          type-ref:
            name: TickerField
      - name: seed
        field-type:
          type-ref:
            name: Seed32
      - name: state_proof
        field-type:
          type-ref:
            name: StateProof
            package: "thru.blockchain.state_proof"
- name: InitializeAccountInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: token_account_index
        field-type:
          primitive: u16
      - name: mint_account_index
        field-type:
          primitive: u16
      - name: owner_account_index
        field-type:
          primitive: u16
      - name: new_account_seed
        field-type:
          type-ref:
            name: Seed32
      - name: state_proof
        field-type:
          type-ref:
            name: StateProof
            package: "thru.blockchain.state_proof"
- name: TransferInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: source_account_index
        field-type:
          primitive: u16
      - name: dest_account_index
        field-type:
          primitive: u16
      - name: amount
        field-type:
          primitive: u64
- name: MintToInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: mint_account_index
        field-type:
          primitive: u16
      - name: dest_account_index
        field-type:
          primitive: u16
      - name: authority_account_index
        field-type:
          primitive: u16
      - name: amount
        field-type:
          primitive: u64
- name: BurnInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: token_account_index
        field-type:
          primitive: u16
      - name: mint_account_index
        field-type:
          primitive: u16
      - name: authority_account_index
        field-type:
          primitive: u16
      - name: amount
        field-type:
          primitive: u64
- name: CloseAccountInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: token_account_index
        field-type:
          primitive: u16
      - name: dest_account_index
        field-type:
          primitive: u16
      - name: authority_account_index
        field-type:
          primitive: u16
- name: FreezeAccountInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: token_account_index
        field-type:
          primitive: u16
      - name: mint_account_index
        field-type:
          primitive: u16
      - name: authority_account_index
        field-type:
          primitive: u16
- name: ThawAccountInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: token_account_index
        field-type:
          primitive: u16
      - name: mint_account_index
        field-type:
          primitive: u16
      - name: authority_account_index
        field-type:
          primitive: u16
- name: TokenInstruction
  kind:
    struct:
      packed: true
      fields:
      - name: tag
        field-type:
          primitive: u8
      - name: payload
        field-type:
          enum:
            packed: true
            tag-ref:
              field-ref:
                path:
                - tag
            variants:
            - name: initialize_mint
              tag-value: 0
              variant-type:
                type-ref:
                  name: InitializeMintInstruction
            - name: initialize_account
              tag-value: 1
              variant-type:
                type-ref:
                  name: InitializeAccountInstruction
            - name: transfer
              tag-value: 2
              variant-type:
                type-ref:
                  name: TransferInstruction
            - name: mint_to
              tag-value: 3
              variant-type:
                type-ref:
                  name: MintToInstruction
            - name: burn
              tag-value: 4
              variant-type:
                type-ref:
                  name: BurnInstruction
            - name: close_account
              tag-value: 5
              variant-type:
                type-ref:
                  name: CloseAccountInstruction
            - name: freeze_account
              tag-value: 6
              variant-type:
                type-ref:
                  name: FreezeAccountInstruction
            - name: thaw_account
              tag-value: 7
              variant-type:
                type-ref:
                  name: ThawAccountInstruction
- name: TokenMintAccount
  kind:
    struct:
      packed: true
      fields:
      - name: decimals
        field-type:
          primitive: u8
      - name: supply
        field-type:
          primitive: u64
      - name: creator
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: mint_authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: freeze_authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: has_freeze_authority
        field-type:
          primitive: u8
      - name: ticker
        field-type:
          type-ref:
            name: TickerField
- name: TokenAccount
  kind:
    struct:
      packed: true
      fields:
      - name: mint
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: owner
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: amount
        field-type:
          primitive: u64
      - name: is_frozen
        field-type:
          primitive: u8
- name: TokenProgramAccount
  kind:
    struct:
      packed: true
      fields:
      - name: data
        field-type:
          size-discriminated-union:
            packed: true
            variants:
            - name: token_account
              expected-size: 73
              variant-type:
                type-ref:
                  name: TokenAccount
            - name: mint_account
              expected-size: 115
              variant-type:
                type-ref:
                  name: TokenMintAccount
- name: InitializeMintEventData
  kind:
    struct:
      packed: true
      fields:
      - name: mint
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: mint_authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: freeze_authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: supply
        field-type:
          primitive: u64
      - name: decimals
        field-type:
          primitive: u8
      - name: has_freeze_authority
        field-type:
          primitive: u8
      - name: ticker
        field-type:
          type-ref:
            name: TickerField
- name: InitializeAccountEventData
  kind:
    struct:
      packed: true
      fields:
      - name: account
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: owner
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: mint
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
- name: TransferEventData
  kind:
    struct:
      packed: true
      fields:
      - name: source
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: dest
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: amount
        field-type:
          primitive: u64
      - name: source_post_balance
        field-type:
          primitive: u64
      - name: dest_post_balance
        field-type:
          primitive: u64
- name: MintToEventData
  kind:
    struct:
      packed: true
      fields:
      - name: mint
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: dest
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: amount
        field-type:
          primitive: u64
      - name: dest_post_balance
        field-type:
          primitive: u64
      - name: mint_supply
        field-type:
          primitive: u64
- name: BurnEventData
  kind:
    struct:
      packed: true
      fields:
      - name: mint
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: account
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: amount
        field-type:
          primitive: u64
      - name: account_post_balance
        field-type:
          primitive: u64
      - name: mint_supply
        field-type:
          primitive: u64
- name: CloseAccountEventData
  kind:
    struct:
      packed: true
      fields:
      - name: account
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: destination
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
- name: FreezeAccountEventData
  kind:
    struct:
      packed: true
      fields:
      - name: account
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: mint
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
- name: ThawAccountEventData
  kind:
    struct:
      packed: true
      fields:
      - name: account
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: mint
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
      - name: authority
        field-type:
          type-ref:
            name: Pubkey
            package: "thru.common.primitives"
- name: TokenEvent
  kind:
    struct:
      packed: true
      fields:
      - name: event_type
        field-type:
          primitive: u8
      - name: payload
        field-type:
          enum:
            packed: true
            tag-ref:
              field-ref:
                path:
                - event_type
            variants:
            - name: initialize_mint
              tag-value: 0
              variant-type:
                type-ref:
                  name: InitializeMintEventData
            - name: initialize_account
              tag-value: 1
              variant-type:
                type-ref:
                  name: InitializeAccountEventData
            - name: transfer
              tag-value: 2
              variant-type:
                type-ref:
                  name: TransferEventData
            - name: mint_to
              tag-value: 3
              variant-type:
                type-ref:
                  name: MintToEventData
            - name: burn
              tag-value: 4
              variant-type:
                type-ref:
                  name: BurnEventData
            - name: close_account
              tag-value: 5
              variant-type:
                type-ref:
                  name: CloseAccountEventData
            - name: freeze_account
              tag-value: 6
              variant-type:
                type-ref:
                  name: FreezeAccountEventData
            - name: thaw_account
              tag-value: 7
              variant-type:
                type-ref:
                  name: ThawAccountEventData
